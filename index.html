<!DOCTYPE html>
<html lang="en">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>NYTimes | Movie Reviews</title>

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- Plugin CSS -->
    <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet" type="text/css">

    <!-- Custom styles for this template -->
    <link href="css/freelancer.min.css" rel="stylesheet">

  </head>

  <body id="page-top">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg bg-secondary fixed-top text-uppercase" id="mainNav">
      <div class="container">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">NYTimes Movie Reviews</a>
        <button class="navbar-toggler navbar-toggler-right text-uppercase bg-primary text-white rounded" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          Menu
          <i class="fas fa-bars"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#portfolio">Reviews</a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#about">About</a>
            </li>
            <li class="nav-item mx-0 mx-lg-1">
              <a class="nav-link py-3 px-0 px-lg-3 rounded js-scroll-trigger" href="#contact">Contact</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <header class="masthead bg-primary text-white text-center">
      <div class="container">
        <img class="img-fluid mb-5 d-block mx-auto" src="img/profile.png" alt="">
        <h1 class="text-uppercase mb-0">New York Times Movie Reviews</h1>
        <hr class="star-light">
        <h2 class="font-weight-light mb-0">The New York Times Developer Network</h2>
      </div>
    </header>

    <!-- Portfolio Grid Section -->
    <section class="portfolio" id="portfolio">
      <div class="container">
        <h2 class="text-center text-uppercase text-secondary mb-0">Reviews</h2>

          <form >
            Movie Title<br>
            <input type="text" id="results" name="results" value="Inception">
            <br>
          </form> 

        <button type="button">Search</button>

        <hr class="star-dark mb-5">
        <div class="row" id="reviews">
          <div id="template" class="card" style="width: 18rem;">
            <img class="card-img-top" src=".../100px180/" alt="Card image cap">
            <div class="card-body">
              <h5 class="card-title">Headline</h5>
              <p class="card-rating">Rating</p>
              <p class="card-byline">Byline</p>
              <p class="card-publication">Publication Date</p>
              <p class="card-text">Short Summary</p>
              <!--<a href="#" class="btn btn-primary">link</a>-->
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- About Section -->
    <section class="bg-primary text-white mb-0" id="about">
      <div class="container">
        <h2 class="text-center text-uppercase text-white">About</h2>
        <hr class="star-light mb-5">
        <div class="row">
          <div class="col-lg-4 ml-auto">
            <p class="lead">The NYTimes Developer API allows you to search for key information about movie reviews.</p>
          </div>
          <div class="col-lg-4 mr-auto">
          </div>
        </div>
      </div>
    </section>


    <!-- Footer -->
    <footer class="footer text-center">
      <div class="container">
        <div class="row">
          <div class="col-md-4 mb-5 mb-lg-0">
            <h4 class="text-uppercase mb-4">NYTimes</h4>
            <p class="lead mb-0">Movie Reviews API</p>
          </div>
          <div class="col-md-4 mb-5 mb-lg-0">

          </div>
          <div class="col-md-4">
            <h4 class="text-uppercase mb-4">About the API</h4>
            <p class="lead mb-0">The NYTimes Developer API allows you to search for key information about movie reviews.</p>
          </div>
        </div>
      </div>
    </footer>

    <div class="copyright py-4 text-center text-white">
      <div class="container">
        <small>Copyright &copy; Ziyad Merhebi 2018</small>
      </div>
    </div>

    <!-- Scroll to Top Button (Only visible on small and extra-small screen sizes) -->
    <div class="scroll-to-top d-lg-none position-fixed ">
      <a class="js-scroll-trigger d-block text-center text-white rounded" href="#page-top">
        <i class="fa fa-chevron-up"></i>
      </a>
    </div>


    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
    <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom scripts for this template -->
    <script src="js/freelancer.min.js"></script>

    <script>
      


      //function called by clicking search button
      function movieSearch() {

        // NY Times API script
          var url = "https://api.nytimes.com/svc/movies/v2/reviews/search.json";
          //title
          url += '?' + $.param({
            'api-key': "e339a5be768f459aaa4e301da53d2281",
            'query': ($("#results").val())
            //'display_title': ($("#results").val())
          });
          console.log(url);
          $.ajax({
            url: url,
            method: 'GET',
          }).done(function(result) {
            //console.log(result);
      
            // loop through array of results
            $.each(result.results, function(i,v) {
                console.log(v);
                // add the title to the body
                
                // clone the template
                var clone = $("#template").clone();
                clone.find(".card-title").text(v.display_title);
                clone.find(".card-rating").text(v.mpaa_rating);
                clone.find(".card-byline").text(v.byline);
                clone.find(".card-publication").text(v.publication_date);
                clone.find(".card-text").text(v.summary_short);
                clone.find(".card-img-top").text(v.multimedia);
                //clone.find(".btn-primary").text(v.url);
                clone.attr("id",v.display_title)
      
                $("#reviews").append(clone);
      
      
                //$("body").append(v.display_title + "<br>")
            });
      
          }).fail(function(err) {
            throw err;
          });
        }


      </script>

      <script>
        
        $("button").on("click", movieSearch) 

        </script>


  </body>

</html>
